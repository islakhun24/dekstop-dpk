<div class="flex w-full h-full gap-2 ">

  <div class="flex flex-col flex-grow p-4 main-content">
    <div class="grid grid-cols-2 gap-4">
     <div>
       <h1 class="flex mt-8 ">

        <span class="ml-4 text-4xl font-bold text-blue-500"> {{detail.no_polisi_kendaraan}}</span>
        <span class="ml-6 font-light">
          <p class="text-sm">Pengemudi</p>
          <p class="font-bold ">{{detail.nama_pengemudi}}</p>
        </span>
       </h1>
       <div class="mt-1 font-light">

       </div>
     </div>
     <div class="flex justify-end">
    <div class="flex space-x-2">
      <button  type="button" (click)="selesai()" class="flex items-center justify-center h-10 px-4 py-2 mt-10 font-light text-white bg-green-500 rounded hover:green-red-700">

        <span class="ml-2 text-base font-medium">Selesai</span></button>

      <button  type="button" (click)="toggleModal()" class="flex items-center justify-center h-10 px-4 py-2 mt-10 font-light text-white bg-blue-500 rounded hover:bg-blue-700">

        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-white fill-current" height="448pt" viewBox="0 0 448 448" width="448pt"><path d="m408 184h-136c-4.417969 0-8-3.582031-8-8v-136c0-22.089844-17.910156-40-40-40s-40 17.910156-40 40v136c0 4.417969-3.582031 8-8 8h-136c-22.089844 0-40 17.910156-40 40s17.910156 40 40 40h136c4.417969 0 8 3.582031 8 8v136c0 22.089844 17.910156 40 40 40s40-17.910156 40-40v-136c0-4.417969 3.582031-8 8-8h136c22.089844 0 40-17.910156 40-40s-17.910156-40-40-40zm0 0"/></svg>  <span class="ml-2 text-base font-medium">Tambah SMU</span></button>

    </div>
    </div>
   </div>
   <div class="flex gap-4 p-6">
   <div class="w-2/6 ">

   </div>
   <div class="w-4/6 -mt-8">

     <span>
       Daftar barang | Total
     </span>
     <span class="ml-2 font-bold text-blue-500">
       {{data.length}} Koli
     </span>
   </div>
   </div>
   <div class="flex gap-4 -mt-6">
     <div class="flex w-2/6 p-8 bg-white flex-nowrap">
     <barcode-scanner-livestream
       type="code_128"
       (valueChanges)="onValueChanges($event)"
       (started)="(onStarted)"
     ></barcode-scanner-livestream>

     </div>
     <!-- ... -->
     <div class="w-4/6 p-8 bg-white ">

     <table   class="min-w-full leading-normal">
       <thead>
           <tr  >
               <th
                   class="px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200">
                   No
               </th>
               <th
                   class="px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200">
                   Status
               </th>
               <th
                   class="px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200">
                   SMU
               </th>
               <th
                   class="px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200">
                   Koli
               </th>
               <th
               class="px-5 py-3 text-xs font-semibold tracking-wider text-left text-gray-600 uppercase bg-gray-100 border-b-2 border-gray-200">
               Berat barang
           </th>
           </tr>
       </thead>
       <tbody>

           <tr *ngFor="let data of data; index as i" class="bg-emerald-200">
             <td class="px-5 py-5 text-sm bg-white border-b border-gray-200">

               <p class="text-gray-900 whitespace-no-wrap">{{i+1}}</p>
             </td>
             <td class="px-5 py-5 text-sm bg-white border-b border-gray-200">
                 <p class="text-gray-900 border p-0.5 border-blue-500 text-center rounded whitespace-no-wrap">BTB</p>
             </td>
             <td class="px-5 py-5 text-sm bg-white border-b border-gray-200">
                 <p class="text-gray-900 whitespace-no-wrap">
                   {{data.smu}}
                 </p>
             </td>
             <td class="px-5 py-5 text-sm bg-white border-b border-gray-200">
               <p class="text-gray-900 whitespace-no-wrap">
                 {{data.koli}}
               </p>
             </td>
             <td class="px-5 py-5 text-sm bg-white border-b border-gray-200">
               <p class="text-gray-900 whitespace-no-wrap">
                 {{data.berat_total}} Kg
               </p>
             </td>
         </tr>

       </tbody>
   </table>
     </div>
   </div>

   </div>
</div>


<div *ngIf="showModal" class="fixed z-50 flex items-center justify-center text-black outline-none inset-32 focus:outline-none">
  <div class="relative w-4/6 mx-auto my-6 min-w-6xl">
    <!--content-->
    <form [formGroup]="form" (ngSubmit)="save()" >
    <div class="relative flex flex-col w-full bg-white border-0 rounded-lg shadow-lg outline-none focus:outline-none">
      <!--header-->
      <div class="flex items-center justify-center p-5 border-b border-solid rounded-t border-blueGray-200">
        <h3 class="text-xl font-medium text-center text-gray-700">
          Tambah SMU
        </h3>

      </div>
      <!--body-->
      <div class="relative flex-auto p-6">
        <div class="w-full">
          <label for="price" class="block text-sm font-medium text-gray-700"
            >Nomor SMU</label
          >
          <div class="relative mt-1 rounded-md shadow-sm">
            <div
              class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none "
            ></div>
            <input
            formControlName="smu"
              type="text"
              name="price"
              [(ngModel)]="no_smu"
              noautocomplete
              autocomplete="off"
              autocorrect="off" autocapitalize="off" spellcheck="false"
              (keyup)="onSmu($event)"
              id="price"
              class="block w-full border-gray-300 rounded-md form-input focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
              placeholder="Nomor SMU"
            />
            <div *ngIf="suggestsmu"  class="mt-1 ">
              <div class="absolute z-40 w-full overflow-y-auto bg-white rounded shadow top-100 lef-0 max-h-select svelte-5uyqqj">
                <div class="flex flex-col w-full max-h-40">
                  <li *ngFor="let item of suggestsmu" (click)="smuSelect(item.smu)"  class="p-4 list-none cursor-pointer hover:bg-gray-50">{{item.smu}}</li>

              </div>
            </div>
            </div>
          </div>
        </div>
        <div class="w-full mt-8">
          <label for="price" class="block text-sm font-medium text-gray-700"
            >Nama Agen</label
          >
          <div class="relative mt-1 rounded-md shadow-sm">
            <div
              class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none "
            ></div>
            <input
            formControlName="nama_agen"
              type="text"
              noautocomplete
              autocomplete="off"
              [(ngModel)]="customer.customer"
              autocorrect="off" autocapitalize="off" spellcheck="false"
              (keyup)="onCustomer($event)"
              class="block w-full border-gray-300 rounded-md form-input focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
              placeholder="Nama Agen"
            />
            <div *ngIf="agens"  class="mt-1 ">
              <div class="absolute z-40 w-full overflow-y-auto bg-white rounded shadow top-100 lef-0 max-h-select svelte-5uyqqj">
                <div class="flex flex-col w-full max-h-40">
                  <li *ngFor="let item of agens" (click)="customerSelect(item)"   class="p-4 list-none cursor-pointer hover:bg-gray-50">{{item.customer}}</li>

              </div>
            </div>
            </div>
          </div>
        </div>
        <div class="grid w-full grid-cols-2 gap-4 mt-8">
          <div class="col-span-1">
            <label for="price" class="block text-sm font-medium text-gray-700"
              >No. Hp Agen</label
            >
            <div class="relative mt-1 rounded-md shadow-sm">
              <div
                class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none "
              ></div>
              <input
              formControlName="no_hp"
                type="text"
                name="price"
                [(ngModel)]="customer.nohp"
                id="price"
                class="block w-full border-gray-300 rounded-md form-input focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                placeholder="No. Hp Age"
              />
            </div>
          </div>
          <div class="col-span-1">
            <label for="price" class="block text-sm font-medium text-gray-700"
              >Alamat Agen</label
            >
            <div class="relative mt-1 rounded-md shadow-sm">
              <div
                class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none "
              ></div>
              <input
              formControlName="alamat"
                type="text"
                name="price"
                [(ngModel)]="customer.alamat"
                id="price"
                class="block w-full border-gray-300 rounded-md form-input focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                placeholder="Alamat Agen"
              />
            </div>
          </div>
        </div>
        <div class="w-full mt-8">
          <label for="price" class="block text-sm font-medium text-gray-700"
            >Nama Barang</label
          >
          <div class="relative mt-1 rounded-md shadow-sm">
            <div
              class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none "
            ></div>
            <input
            formControlName="nama_barang"
              type="text"
              noautocomplete
              [(ngModel)]="barang.nama_barang"
              autocomplete="off"
              autocorrect="off" autocapitalize="off" spellcheck="false"
              (keyup)="onBarang($event)"
              class="block w-full border-gray-300 rounded-md form-input focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
              placeholder="Nama Barang"
            />

            <div *ngIf="barangs"  class="mt-1 ">
              <div class="absolute z-40 w-full overflow-y-auto bg-white rounded shadow top-100 lef-0 max-h-select svelte-5uyqqj">
                <div class="flex flex-col w-full max-h-40">
                  <li *ngFor="let item of barangs" (click)="barangSelect(item)"  class="flex p-4 list-none cursor-pointer hover:bg-gray-50"><span class="font-semibold text-gray-300">{{item.kode_barang}}</span>&nbsp; - &nbsp; {{item.nama_barang}}</li>
</div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!--footer-->
      <div class="flex items-center justify-end p-6 border-t border-solid rounded-b border-blueGray-200">
        <button class="px-6 py-2 mb-1 mr-1 text-sm font-bold text-blue-500 uppercase transition-all duration-150 ease-linear outline-none background-transparent focus:outline-none" type="button" (click)="toggleModal()">
          Batalkan
        </button>
        <button
        type="submit"
        class="flex items-center justify-center px-4 px-6 py-2 py-3 mb-1 mr-1 text-sm font-bold text-white uppercase transition-all duration-150 ease-linear bg-blue-500 rounded shadow outline-none bg-emerald-500 active:bg-emerald-600 hover:shadow-lg focus:outline-none"
      >
        <div [hidden]="!isLoading" class="w-3 h-3 mr-2 border-t-2 border-b-2 border-white rounded-full animate-spin"></div>

        Simpan
      </button>
      </div>
    </div>
  </form>
  </div>
</div>
<div *ngIf="showModal" class="fixed inset-0 z-40 bg-black opacity-25"></div>
